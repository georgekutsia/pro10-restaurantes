<div class="restaurant-box">
    <!-- Con auth admin -->
    <div class="loader-div">
       <div *ngIf="loaded" class="lds-ripple"><div></div><div></div></div>
    </div>
  <div class="add">
        <button *ngIf="usuario?.admin" routerLink='/restaurants/add' class="add-btn">Añadir nuevo restaurante</button>   
  </div>
  <div class="gallery">
    <div  [ngStyle]="{ width: '300px' }" *ngFor="let restaurant of restList">
      <h3 class="mt-5">{{ restaurant.name }} </h3>
      <div style="position: relative;">
        <img routerLink='/comentarios/{{ restaurant.id }}/userComment' src="{{ restaurant.img }}" alt="{{ restaurant.name }}" width="300px" height="240" />
        <div class="city">
          <p><i class="fa-solid fa-map-location-dot"></i> {{ restaurant.address }} </p>
          <p> <i class="fa-solid fa-phone"></i> {{restaurant.phone}} </p>
          <p><i class="fa-regular fa-clock"></i>  {{restaurant.hours}} </p>
        </div>
        </div>
        <p class="description">{{ restaurant.description }}</p>
      <p *ngIf="restaurantAverages[restaurant.id]" class="stars">{{ restaurantAverages[restaurant.id] }}
        <ng-container *ngFor="let star of [].constructor(10); let i = index">
          <i class="fa-regular fa-star"[ngClass]="{ 'fa-solid': i < restaurantAverages[restaurant.id], 'red-star': restaurantAverages[restaurant.id] < 6, 'green-star': restaurantAverages[restaurant.id] >= 6 }"></i>
        </ng-container>
      </p>
      <p *ngIf="!restaurantAverages[restaurant.id]" class="stars"> No hay opiniones. ¡Sé el primero!</p>
      <div class="button-div">
        <button *ngIf="!isRestaurantFavorite(restaurant.id) && usuario.name" class="button" (click)="addToFavorites(restaurant.id)">Añadir a favoritos</button>
        <button *ngIf="isRestaurantFavorite(restaurant.id) && usuario.name" class="button favorite-button" (click)="deleteFromFavorites(restaurant.id)"><i class="fa-regular fa-heart favorite-heart"></i><i class="fa-regular fa-heart favorite-heart1"></i><i class="fa-regular fa-heart favorite-heart2"></i><i class="fa-regular fa-heart favorite-heart3"></i> <span class="favorite-text"> </span> </button>
        <div>
          <button *ngIf="usuario.admin" class="button" routerLink='/restaurants/{{ restaurant.id }}'>Gestionar</button>
          <button *ngIf="usuario.name && !usuario.admin && restaurant.comments.length >= 1" class="button" routerLink='/comentarios/{{ restaurant.id }}/userComment'>Ver {{restaurant.comments.length}} comentarios</button>
          <button *ngIf="usuario.name && !usuario.admin && restaurant.comments.length === 0" class="button" routerLink='/comentarios/{{ restaurant.id }}/userComment'>Sin comentarios</button>
        </div>
      </div>
    </div>
  </div>
</div>
